{% extends "store/navigation_bar.html" %}
{%load static%}
{%load staticfiles %}

<!DOCTYPE html>

{% block head2 %}
    <head>
        <title>Dealers &mdash; Colorlib e-Commerce Template</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link href="https://fonts.googleapis.com/css?family=Rubik:400,700" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'fonts/icomoon/style.css' %}">

        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
        <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
        <link rel="stylesheet" href="{% static 'css/owl1.carousel.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/owl1.theme.default.min.css' %}">


        <link rel="stylesheet" href="{% static 'css/aos.css' %}">

        <link rel="stylesheet" href="{% static 'css/style1.css' %}">

    </head>
{% endblock %}


{% block body %}

    <div class="site-wrap">

        <div class="site-section">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 mb-5 mb-md-0">
                        <h2 class="h3 mb-3 text-black">Billing Details</h2>
                        <div class="p-3 p-lg-5 border">
                            <div class="form-group">
                                <label for="c_country" class="text-black">Country <span class="text-danger">*</span></label>
                                <select id="c_country" class="form-control">
                                    <option value="1">Select a country</option>
                                    <option value="2">bangladesh</option>
                                    <option value="3">Algeria</option>
                                    <option value="4">Afghanistan</option>
                                    <option value="5">Ghana</option>
                                    <option value="6">Albania</option>
                                    <option value="7">Bahrain</option>
                                    <option value="8">Colombia</option>
                                    <option value="9">Dominican Republic</option>
                                </select>
                            </div>
                            <div class="form-group row">
                                <div class="col-md-6">
                                    <label for="c_fname" class="text-black">First Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="c_fname" name="c_fname">
                                </div>
                                <div class="col-md-6">
                                    <label for="c_lname" class="text-black">Last Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="c_lname" name="c_lname">
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-md-12">
                                    <label for="c_companyname" class="text-black">Company Name </label>
                                    <input type="text" class="form-control" id="c_companyname" name="c_companyname">
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-md-12">
                                    <label for="c_address" class="text-black">Address <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="c_address" name="c_address" placeholder="Street address">
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-md-6">
                                    <label for="c_state_country" class="text-black">City <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="c_city" name="c_state_country">
                                </div>
                                <div class="col-md-6">
                                    <label for="c_postal_zip" class="text-black">Posta / Zip <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="c_zip" name="c_postal_zip">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="c_order_notes" class="text-black">Order Notes</label>
                                <textarea name="c_order_notes" id="c_order_notes" cols="30" rows="5" class="form-control" placeholder="Write your notes here..."></textarea>
                            </div>

                        </div>
                    </div>
                    <div class="col-md-6">

                        <div class="row mb-5">
                            <div class="col-md-12">
                                <h2 class="h3 mb-3 text-black">Your Order</h2>
                                <div class="p-3 p-lg-5 border">
                                    <table class="table site-block-order-table mb-5">
                                        <thead>
                                        <th>Product</th>
                                        <th>Total</th>
                                        </thead>
                                        <tbody id="items_list">

                                        </tbody>
                                    </table>

                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_address" class="text-black">Card Number <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="c_address" name="c_card" placeholder="Card number">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="col-md-6">
                                            <label for="c_fname" class="text-black">Month <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="c_month" name="c_fname">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="c_lname" class="text-black">Year <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="c_years" name="c_lname">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="col-md-6">
                                            <label for="c_fname" class="text-black">CCV <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="c_ccv" name="c_fname">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_address" class="text-black">Holder's name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="c_holder" name="c_address" placeholder="name">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_address" class="text-black">Holder's id <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="c_id" name="c_address" placeholder="id">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <button id="place_order" class="btn btn-primary btn-lg btn-block" href="#">Place Order</button>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- </form> -->
            </div>
        </div>

    </div>

    <script>
        var basket_data;
        var onsuccess = (res, data) => {
            basket_data = data;
            for(var cart in data){
                var item_list = data[cart]['cart'];
                var price = 0;
                for(var item in item_list){
                    price += +item_list[item]['price'];
                    var node = document.createElement("TR");
                    node.innerHTML = '    <td>' + item_list[item]['name'] + ' <strong class="mx-2">x</strong>' + item_list[item]['quantity'] + '</td>\n' +
                        '    <td>$' + item_list[item]['price'] + '</td>\n';
                    document.getElementById("items_list").prepend(node);
                }
                var node2 = document.createElement("TR");
                node2.innerHTML = '<td class="text-black font-weight-bold"><strong>' + data[cart]['store'] + ' Cart Subtotal</strong></td>\n' +
                    '<td class="text-black">$\n' +
                    price +
                    '</td>';
                document.getElementById("items_list").appendChild(node2);
            }

            var node3 = document.createElement("TR");
            var sub = read_cookie('subtotal');
            node3.innerHTML = '<td class="text-black font-weight-bold"><strong>Order Total</strong></td>\n' +
                '<td class="text-black font-weight-bold"><strong>$\n' +
                sub +
                '</strong></td>';
            document.getElementById("items_list").appendChild(node3);
        };

        var onfailure = (res) => {

        };

        var username = read_cookie('username');
        send_msg({action: 'get_basket', username: username}, onsuccess, onfailure);

        //Place Order click
        var order = document.getElementById("place_order");
        order.onclick = function (event) {
            var fname = document.getElementById("c_fname").value;
            if(fname === undefined)
                alert("Please fill out your first name");
            var lname = document.getElementById("c_lname").value;
            if(lname === undefined)
                alert("Please fill out your last name");
            var name = fname + lname;
            var address = document.getElementById("c_address").value;
            if(address === undefined)
                alert("Please fill out your address");
            var city = document.getElementById("c_city").value;
            if(city === undefined)
                alert("Please fill out the city");
            var country = document.getElementById("c_country").value;
            if(country === undefined)
                alert("Please fill out the country");
            var zip = document.getElementById("c_zip").value;
            if(zip === undefined)
                alert("Please fill out the ZIP code");
            var supply_details = {'name': name, 'address': address, 'city': city,
                'country': country, 'zip': zip};

            var card = document.getElementById("c_card").value;
            if(card === undefined)
                alert("Please fill out the card number");
            var month = document.getElementById("c_month").value;
            if(month === undefined)
                alert("Please fill out the card's expiration date");
            var year = document.getElementById("c_year").value;
            if(year === undefined)
                alert("Please fill out the card's expiration date");
            var holder = document.getElementById("c_holder").value;
            if(holder === undefined)
                alert("Please fill out the card's holder name");
            var ccv = document.getElementById("c_ccv").value;
            if(ccv === undefined)
                alert("Please fill out the card's CCV");
            var id = document.getElementById("c_id").value;
            if(id === undefined)
                alert("Please fill out the card's holder id");
            var collect_details = {'card_number': card, 'month': month, 'year': year, 'holder': holder,
                'ccv': ccv, 'id': id};
        };

    </script>

    <script>




        var username = read_cookie('username');
        send_msg({action: 'buy_items', username: username}, onsuccess, onfailure);

    </script>

    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'js/jquery-ui.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap1.min.js' %}"></script>
    <script src="{% static 'js/owl1.carousel.min.js' %}"></script>
    <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'js/aos.js' %}"></script>

    <script src="{% static 'js/main1.js' %}"></script>

{% endblock %}
