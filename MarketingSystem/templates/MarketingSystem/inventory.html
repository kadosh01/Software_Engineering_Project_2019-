{% extends "store/navigation_bar.html" %}
{%load static%}
{%load staticfiles %}
{% block head2 %}
    <head xmlns="http://www.w3.org/1999/html">
    <title>Shoppers &mdash; Colorlib e-Commerce Template</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mukta:300,400,700">
    <link rel="stylesheet" href={% static 'fonts/icomoon/style.css' %}>

    <link rel="stylesheet" href={% static 'css/bootstrap.min.css' %}>
    <link rel="stylesheet" href={% static 'css/magnific-popup.css' %}>
    <link rel="stylesheet" href={% static 'css/jquery-ui.css' %}>
    <link rel="stylesheet" href={% static 'css/owl1.carousel.min.css' %}>
    <link rel="stylesheet" href={% static 'css/owl.theme.default.min.css' %}>


    <link rel="stylesheet" href={% static 'css/aos.css' %}>

    <link rel="stylesheet" href={% static 'css/style1.css' %}>
    <script src="{% static 'js/client.js' %}"></script>
    <script src="{% static 'js/cookieMonster.js' %}"></script>

  </head>
{% endblock %}

{% block body %}
    <html>
    <head>
    <style type="text/css">
        @import url('https://fonts.googleapis.com/css?family=Amarante');

        html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
          margin: 0;
          padding: 0;
          border: 0;
          font-size: 100%;
          font: inherit;
          vertical-align: baseline;
          outline: none;
          -webkit-font-smoothing: antialiased;
          -webkit-text-size-adjust: 100%;
          -ms-text-size-adjust: 100%;
          -webkit-box-sizing: border-box;
          -moz-box-sizing: border-box;
          box-sizing: border-box;
        }
        html { overflow-y: scroll; }
        body {
          background: #eee url('https://i.imgur.com/eeQeRmk.png'); /* https://subtlepatterns.com/weave/ */
          font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
          font-size: 62.5%;
          line-height: 1;
          color: #585858;
          padding: 22px 10px;
          padding-bottom: 55px;
        }

        ::selection { background: #5f74a0; color: #fff; }
        ::-moz-selection { background: #5f74a0; color: #fff; }
        ::-webkit-selection { background: #5f74a0; color: #fff; }

        br { display: block; line-height: 1.6em; }

        article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; }
        ol, ul { list-style: none; }

        input, textarea {
          -webkit-font-smoothing: antialiased;
          -webkit-text-size-adjust: 100%;
          -ms-text-size-adjust: 100%;
          -webkit-box-sizing: border-box;
          -moz-box-sizing: border-box;
          box-sizing: border-box;
          outline: none;
        }

        blockquote, q { quotes: none; }
        blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; }
        strong, b { font-weight: bold; }

        table { border-collapse: collapse; border-spacing: 0; }
        img { border: 0; max-width: 100%; }

        h1 {
          font-family: 'Amarante', Tahoma, sans-serif;
          font-weight: bold;
          font-size: 3.6em;
          line-height: 1.7em;
          margin-bottom: 10px;
          text-align: center;
        }


        /** page structure **/
        #wrapper {
          display: block;
          width: 850px;
          background: #fff;
          margin: 0 auto;
          padding: 10px 17px;
          -webkit-box-shadow: 2px 2px 3px -1px rgba(0,0,0,0.35);
        }

        #myTable {
          margin: 0 auto;
          font-size: 1.2em;
          margin-bottom: 15px;
        }


        #myTable thead {
          cursor: pointer;
          background: #c9dff0;
        }
        #myTable thead tr th {
          font-weight: bold;
          padding: 12px 30px;
          padding-left: 42px;
        }
        #myTable thead tr th span {
          padding-right: 20px;
          background-repeat: no-repeat;
          background-position: 100% 100%;
        }

        #myTable thead tr th.headerSortUp, #myTable thead tr th.headerSortDown {
          background: #acc8dd;
        }

        #myTable thead tr th.headerSortUp span {
          background-image: url('https://i.imgur.com/SP99ZPJ.png');
        }
        #myTable thead tr th.headerSortDown span {
          background-image: url('https://i.imgur.com/RkA9MBo.png');
        }

        input[type=submit]{
          background-color: #89837e;
          border: none;
          color: white;
          padding: 4px 8px;
          text-decoration: none;
          margin: 4px 2px;
          cursor: pointer;
          text-align: center;
        }

        input:hover[type=submit], input:active[type=submit] {
          background-color: #85a6bf;
        }

        a[type=edit1]{
          background-color: #89837e;
          border: none;
          color: white;
          padding: 8px 16px;
          text-decoration: none;
          margin: 4px 2px;
          cursor: pointer;
          text-align: center;
        }

        a:hover[type=edit1], a:active[type=edit1] {
          background-color: #ddadbc;
        }

        #myTable tbody tr {
          color: #555;
        }
        #myTable tbody tr td {
          text-align: center;
          padding: 15px 10px;
        }
        #myTable tbody tr td.lalign {
          text-align: left;
        }
    </style>
</head>
    <body>
 <div>
     <div align="center" class="container" style="margin-top: 50px">
            <div><label for="storename" ><b>Store Name </b></label>
                <input type="text" id="storename" name="storename" style="width: 300px;" placeholder="Store name..">
                <input id="submit" type="submit" value="Submit" onclick="myFunction()" target="_blank">
            </div>
    </div>
<br>
  <table id="myTable" cellspacing="0" cellpadding="0">
    <thead>
    <br>
      <tr>
        <th><span>Item name</span></th>
          <th><span>Category</span></th>
          <th><span>Price</span></th>
          <th><span>quantity</span></th>
      </tr>
    <br>
    </thead>
      <tbody>
      <tr class="lalign"></tr>
      </tbody>
  </table>

     <div align="center" class="container" style="margin-top: 50px">
         <a type="edit1" id="edit" href="/edit_product/" disabled="disabled">Edit Item</a>
         <a type="edit1" id="remove" href="/remove_product/" disabled="disabled">Remove Item</a>
         <a type="edit1" id="add" href="/add_item/" disabled="disabled">Add new Item</a>
    </div>
 </div>

    <script>
        function myFunction() {
            var storename = document.getElementById("storename").value;
            document.getElementById("submit").disabled = true;
            send_msg({action: 'get_store_inv', store_name: storename}, (message, val)=>{
                var  cur_username = read_cookie('username');
                var can = false;
                var inventory = val['inventory'];
                var i;
                write_cookie("store_name", storename);
                send_msg({action: 'get_store_owners', store_name: storename}, (message, val)=> {
                    var owners = val['storeOwners'];
                    for (i = 0; i < owners.length; i++) {
                        if (cur_username == owners[i]['name']) {
                            can = true;
                            write_cookie("user_type", "owner");
                            break;
                        }
                    }
                    if (!can) {
                        send_msg({action: 'get_store_managers', store_name: storename}, (message, val) => {
                            var managers = val['storeManagers'];
                            for (i = 0; i < managers.length; i++) {
                                if (cur_username == managers[i]['name']) {
                                    write_cookie("user_type", "manager");
                                    can = true;
                                    break;
                                }
                            }
                            if (can) {
                                var table = document.getElementById("myTable");
                                var row, cellItemName, cellQuantity, cellPrice, cellCategory;
                                for (i = 0; i < inventory.length; i++) {
                                    row = table.insertRow(-1);
                                    cellItemName = row.insertCell(0);
                                    cellCategory = row.insertCell(1);
                                    cellPrice = row.insertCell(2);
                                    cellQuantity = row.insertCell(3);
                                    cellItemName.innerHTML = inventory[i]['name'];
                                    cellQuantity.innerHTML = inventory[i]['quantity'];
                                    cellPrice.innerHTML = inventory[i]['price'];
                                    cellCategory.innerHTML = inventory[i]['category'];
                                }
                            }
                            else{
                                alert("you are not a store owner of this store");
                            }
                        }, onfailure);
                    } else {
                        var table = document.getElementById("myTable");
                        var row, cellItemName, cellQuantity, cellPrice, cellCategory;
                        for (i = 0; i < inventory.length; i++) {
                            row = table.insertRow(-1);
                            cellItemName = row.insertCell(0);
                            cellCategory = row.insertCell(1);
                            cellPrice = row.insertCell(2);
                            cellQuantity = row.insertCell(3);
                            cellItemName.innerHTML = inventory[i]['name'];
                            cellQuantity.innerHTML = inventory[i]['quantity'];
                            cellPrice.innerHTML = inventory[i]['price'];
                            cellCategory.innerHTML = inventory[i]['category'];
                        }
                    }
                }, onfailure);

            }, onfailure);
        }

    </script>
     </body>
    </html>
    <script src={% static 'js/jquery-3.3.1.min.js' %}></script>
  <script src={% static 'js/jquery-ui.js' %}></script>
  <script src={% static 'js/popper.min.js' %}></script>
  <script src={% static 'js/bootstrap1.min.js' %}></script>
  <script src={% static 'js/owl1.carousel.min.js' %}></script>
  <script src={% static 'js/jquery.magnific-popup.min.js' %}></script>
  <script src={% static 'js/aos.js' %}></script>

  <script src={% static 'js/main1.js' %}></script>
{% endblock %}



